<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/sankey.js"></script>
<script src="https://code.highcharts.com/modules/dependency-wheel.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script type="text/javascript" src="https://chrissammut11.github.io/cancss.github.io/
DDC/util/messagingUtil.js"></script>
<script type="text/javascript" src="https://chrissammut11.github.io/cancss.github.io/
DDC/util/contentUtil.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
</figure>

<script>
document.addEventListener('DOMContentLoaded', function (){
    va.messagingUtil.setOnDataReceivedCallback(onDataReceived);
});
function onDataReceived(resultData) {
    if (!resultData) return;
    col0_label = resultData["columns"][0]["label"]
    console.log("col0:" + col0_label)
    col1_label = resultData["columns"][1]["label"]
    console.log("col1:" + col1_label)
    col2_label = resultData["columns"][2]["label"]
    console.log("col2:" + col2_label)
    //     data_temp = resultData["data"]
    // const va_data = []
    // for (let i = 0; i < data_temp.length; i++){
    //      va_data.push(resultData["data"][i])}
    }

    // let va_data=[
    //     ['Brazil', 'Portugal', 5],
    //     ['Brazil', 'France', 1],
    //     ['Brazil', 'Spain', 1],
    //     ['Brazil', 'England', 1],
    //     ['Canada', 'Portugal', 1],
    //     ['Canada', 'France', 5],
    //     ['Canada', 'England', 1],
    //     ['Mexico', 'Portugal', 1],
    //     ['Mexico', 'France', 1],
    //     ['Mexico', 'Spain', 5],
    //     ['Mexico', 'England', 1],
    //     ['USA', 'Portugal', 1],
    //     ['USA', 'France', 1],
    //     ['USA', 'Spain', 1],
    //     ['USA', 'England', 5],
    //     ['Portugal', 'Angola', 2],
    //     ['Portugal', 'Senegal', 1],
    //     ['Portugal', 'Morocco', 1],
    //     ['Portugal', 'South Africa', 3],
    //     ['France', 'Angola', 1],
    //     ['France', 'Senegal', 3],
    //     ['France', 'Mali', 3],
    //     ['France', 'Morocco', 3],
    //     ['France', 'South Africa', 1],
    //     ['Spain', 'Senegal', 1],
    //     ['Spain', 'Morocco', 3],
    //     ['Spain', 'South Africa', 1],
    //     ['England', 'Angola', 1],
    //     ['England', 'Senegal', 1],
    //     ['England', 'Morocco', 2],
    //     ['England', 'South Africa', 7],
    //     ['South Africa', 'China', 5],
    //     ['South Africa', 'India', 1],
    //     ['South Africa', 'Japan', 3],
    //     ['Angola', 'China', 5],
    //     ['Angola', 'India', 1],
    //     ['Angola', 'Japan', 3],
    //     ['Senegal', 'China', 5],
    //     ['Senegal', 'India', 1],
    //     ['Senegal', 'Japan', 3],
    //     ['Mali', 'China', 5],
    //     ['Mali', 'India', 1],
    //     ['Mali', 'Japan', 3],
    //     ['Morocco', 'China', 5],
    //     ['Morocco', 'India', 1],
    //     ['Morocco', 'Japan', 3],
    //     ['Japan', 'Brazil', 1]
    // ]
    // Highchartmaker(va_data,col2_label);
function Highchartmaker(input_data,input_series_name) {
    Highcharts.chart('container', {

title: {
    text: ' '
},

accessibility: {
    point: {
        valueDescriptionFormat: '{index}. From {point.from} to ' +
            '{point.to}: {point.weight}.'
    }
},

series: [{
    keys: ['from', 'to', 'weight'],
    data: input_data,
    type: 'dependencywheel',
    name: input_series_name,
    dataLabels: {
        color: '#333',
        style: {
            textOutline: 'none'
        },
        textPath: {
            enabled: true
        },
        distance: 10
    },
    size: '95%'
}]

});

}
</script>
